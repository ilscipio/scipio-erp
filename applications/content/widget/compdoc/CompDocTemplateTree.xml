<?xml version="1.0" encoding="UTF-8"?>
<!--
This file is subject to the terms and conditions defined in
 file 'LICENSE', which is part of this source code package.
-->
<trees xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-tree.xsd">
    <tree name="CompDocTemplateTree" root-node-name="node-root"
        default-render-style="simple" default-wrap-style="treeWrapper">
        <node name="node-root" wrap-style="treeWrapper">
            <entity-one entity-name="Content" use-cache="false">
                <field-map field-name="contentId" from-field="rootContentId"/>
            </entity-one>
            <include-screen name="rootTemplateLine" location="component://content/widget/compdoc/CompDocScreens.xml"/>
            <sub-node node-name="node-body">
                <entity-condition entity-name="AssocRevisionItemView" use-cache="false">
                   <condition-list combine="and">
                        <condition-expr field-name="contentIdTo" operator="equals" from-field="rootContentId"/>
                        <condition-expr field-name="rootRevisionContentId" operator="equals" from-field="rootContentId"/>
                        <condition-expr field-name="contentRevisionSeqId" operator="less-equals" from-field="rootContentRevisionSeqId" ignore-if-null="true"/>
                        <condition-expr field-name="contentAssocTypeId" operator="equals" value="COMPDOC_PART"/>
                        <condition-expr field-name="fromDate" operator="less-equals" from-field="nowTimestamp"/>
                        <condition-list combine="or">
                            <condition-expr field-name="thruDate" operator="equals" value=""/>
                            <condition-expr field-name="thruDate" operator="greater" from-field="nowTimestamp"/>
                        </condition-list>
                   </condition-list>

                   <select-field field-name="rootRevisionContentId"/>
                   <select-field field-name="itemContentId"/>
                   <select-field field-name="maxRevisionSeqId"/>
                   <select-field field-name="contentId"/>
                   <select-field field-name="contentIdTo"/>
                   <select-field field-name="contentAssocTypeId"/>
                   <select-field field-name="fromDate"/>
                   <select-field field-name="sequenceNum"/>

                   <order-by field-name="sequenceNum"/>
                </entity-condition>
            </sub-node>
        </node>
        <node name="node-body" join-field-name="itemContentId" entity-name="AssocRevisionItemView" wrap-style="treeWrapper">
            <entity-one entity-name="Content" use-cache="false">
                <field-map field-name="contentId" from-field="itemContentId"/>
            </entity-one>
            <include-screen name="childTemplateLine" location="component://content/widget/compdoc/CompDocScreens.xml"/>
            <sub-node node-name="node-body">
                <entity-condition entity-name="AssocRevisionItemView" use-cache="false">
                   <condition-list combine="and">
                        <condition-expr field-name="contentIdTo" operator="equals" from-field="contentId"/>
                        <condition-expr field-name="rootRevisionContentId" operator="equals" from-field="rootContentId"/>
                        <condition-expr field-name="contentAssocTypeId" operator="equals" value="COMPDOC_PART"/>
                        <condition-expr field-name="contentRevisionSeqId" operator="less-equals" from-field="rootContentRevisionSeqId" ignore-if-null="true"/>
                        <condition-expr field-name="fromDate" operator="less-equals" from-field="nowTimestamp"/>
                        <condition-list combine="or">
                            <condition-expr field-name="thruDate" operator="equals" value=""/>
                            <condition-expr field-name="thruDate" operator="greater" from-field="nowTimestamp"/>
                        </condition-list>
                   </condition-list>

                   <select-field field-name="rootRevisionContentId"/>
                   <select-field field-name="itemContentId"/>
                   <select-field field-name="maxRevisionSeqId"/>
                   <select-field field-name="contentId"/>
                   <select-field field-name="contentIdTo"/>
                   <select-field field-name="contentAssocTypeId"/>
                   <select-field field-name="fromDate"/>
                   <select-field field-name="sequenceNum"/>

                   <order-by field-name="sequenceNum"/>
                </entity-condition>
           </sub-node>
        </node>
    </tree>

    <tree name="CompDocInstanceTree" root-node-name="node-root"
        default-render-style="simple" default-wrap-style="treeWrapper">
        <node name="node-root">
            <entity-one entity-name="Content" use-cache="false">
                <field-map field-name="contentId" from-field="instanceContent.instanceOfContentId"/>
            </entity-one>
            <include-screen name="rootInstanceLine" location="component://content/widget/compdoc/CompDocScreens.xml"/>
            <sub-node node-name="node-body">
                <entity-condition entity-name="AssocRevisionItemView" use-cache="false">
                   <condition-list combine="and">
                        <condition-expr field-name="contentIdTo" operator="equals" from-field="templateContentId"/>
                        <condition-expr field-name="rootRevisionContentId" operator="equals" from-field="templateContentId"/>
                        <condition-expr field-name="contentRevisionSeqId" operator="less-equals" from-field="templateContentRevisionSeqId" ignore-if-null="true"/>
                        <condition-expr field-name="contentAssocTypeId" operator="equals" value="COMPDOC_PART"/>
                        <condition-expr field-name="fromDate" operator="less-equals" from-field="nowTimestamp"/>
                        <condition-list combine="or">
                            <condition-expr field-name="thruDate" operator="equals" value=""/>
                            <condition-expr field-name="thruDate" operator="greater" from-field="nowTimestamp"/>
                        </condition-list>
                   </condition-list>

                   <select-field field-name="rootRevisionContentId"/>
                   <select-field field-name="itemContentId"/>
                   <select-field field-name="maxRevisionSeqId"/>
                   <select-field field-name="contentId"/>
                   <select-field field-name="contentIdTo"/>
                   <select-field field-name="contentAssocTypeId"/>
                   <select-field field-name="fromDate"/>
                   <select-field field-name="sequenceNum"/>

                   <order-by field-name="sequenceNum"/>
                </entity-condition>
            </sub-node>
        </node>
        <node name="node-body" join-field-name="itemContentId" entity-name="AssocRevisionItemView">
            <entity-one entity-name="Content" use-cache="false">
                <field-map field-name="contentId" from-field="itemContentId"/>
            </entity-one>
            <include-screen name="childInstanceLine" location="component://content/widget/compdoc/CompDocScreens.xml"/>
            <sub-node node-name="node-body">
                <entity-condition entity-name="AssocRevisionItemView" use-cache="false">
                   <condition-list combine="and">
                        <condition-expr field-name="contentIdTo" operator="equals" from-field="contentId"/>
                        <condition-expr field-name="rootRevisionContentId" operator="equals" from-field="templateContentId"/>
                        <condition-expr field-name="contentAssocTypeId" operator="equals" value="COMPDOC_PART"/>
                        <condition-expr field-name="contentRevisionSeqId" operator="less-equals" from-field="templateContentRevisionSeqId"/>
                        <condition-expr field-name="fromDate" operator="less-equals" from-field="nowTimestamp"/>
                        <condition-list combine="or">
                            <condition-expr field-name="thruDate" operator="equals" value=""/>
                            <condition-expr field-name="thruDate" operator="greater" from-field="nowTimestamp"/>
                        </condition-list>
                   </condition-list>

                   <select-field field-name="rootRevisionContentId"/>
                   <select-field field-name="itemContentId"/>
                   <select-field field-name="maxRevisionSeqId"/>
                   <select-field field-name="contentId"/>
                   <select-field field-name="contentIdTo"/>
                   <select-field field-name="contentAssocTypeId"/>
                   <select-field field-name="fromDate"/>
                   <select-field field-name="sequenceNum"/>

                   <order-by field-name="sequenceNum"/>
                </entity-condition>
           </sub-node>
        </node>
    </tree>
</trees>
